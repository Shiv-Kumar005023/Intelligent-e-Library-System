
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Intelligent Library System — Premium Dark</title>
  <style>
 
    :root{
      --bg1: #3f053f;            
      --bg2: #02021a;
      --card: rgba(10,10,34,0.85); 
      --muted: #9aa4b2;         
      --text: #e6eef8;          
      --accent: #7c3aed;
      --accent-2: #0ea5e6;      
      --glass: rgba(255,255,255,0.03); /
      --shadow-lg: 0 24px 60px rgba(2,6,23,0.7);
      --glass-border: rgba(255,255,255,0.06);
      --success: #22c55e;
      --danger: #ff6b6b;
    }

 
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: "Segoe UI", Roboto, "Noto Sans", Arial, sans-serif;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      color:var(--text);
      background: radial-gradient(1200px 600px at 10% 10%, rgba(124,58,237,0.06), transparent 8%),
                  radial-gradient(1000px 500px at 90% 90%, rgba(14,165,255,0.03), transparent 8%),
                  linear-gradient(180deg,var(--bg1) 0%, var(--bg2) 60%);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      -webkit-text-size-adjust:100%;
    }

    .wrap{
      width:min(1100px, 96%);
      margin:36px auto;
      padding:28px;
      position:relative;
      border-radius:18px;
      backdrop-filter: blur(6px) saturate(120%);
      border:1px solid rgba(255,255,255,0.02);
      box-shadow: var(--shadow-lg);
    }

    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:26px;
    }

    header .left, header .right{display:flex; align-items:center; gap:14px;}

    header h1{
      margin:0;
      font-size:2.1rem;
      letter-spacing:-0.5px;
      color:var(--accent-2);
      text-shadow: 0 6px 28px rgba(14,165,230,0.06), 0 2px 6px rgba(124,58,237,0.06);
      font-weight:800;
    }

    .logo-left{
      height:140px;
      max-width: fit-content;
      padding:10px 14px;
      border-radius:20px;
      object-fit: cover;
      box-shadow: 0 6px 18px rgba(2,6,23,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border:1px solid var(--glass-border);
    }
    .logo-left img{ height:7rem; display:block; }

    .menu-dot{
      padding:10px;
      border-radius:12px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
      border:1px solid var(--glass-border);
      cursor:pointer;
      user-select:none;
      font-weight:700;
      position:relative;
      color:var(--text);
      box-shadow: 0 6px 18px rgba(2,6,23,0.5);
    }

    .menu-content{
      display:none;
      position:absolute;
      right:0;
      top:46px;
      min-width:240px;
      background:linear-gradient(180deg, rgba(10,10,34,0.95), rgba(10,10,34,0.9));
      border-radius:12px;
      box-shadow:0 18px 40px rgba(2,6,23,0.6);
      padding:8px;
      z-index:40;
      transform-origin:top right;
      transition: all .18s ease;
      border:1px solid var(--glass-border);
      color:var(--text);
    }
    .menu-content.show{ display:block;}

    .menu-content a{
      display:block;
      padding:10px 12px;
      color:var(--accent-2);
      text-decoration:none;
      font-weight:700;
      border-radius:8px;
    }
    .menu-content a:hover{ background: rgba(14,165,230,0.06); }

    /* Cards grid */
    .cards{
      display:grid;
      grid-template-columns: repeat(4,1fr);
      gap:20px;
      margin-bottom:22px;
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), var(--card));
      border-radius:18px;
      padding:26px;
      text-align:center;
      font-weight:800;
      letter-spacing:0.2px;
      box-shadow: 0 8px 22px rgba(2,6,23,0.45);
      cursor:pointer;
      transition: transform .24s cubic-bezier(.16,.9,.3,1), box-shadow .24s;
      border:1px solid rgba(255,255,255,0.03);
      user-select:none;
      position:relative;
      min-height:110px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:1.05rem;
      color:var(--text);
    }
    .card:hover{
      transform: translateY(-12px) rotateX(3deg) scale(1.02);
      z-index: 1;
      box-shadow: 0 18px 60px rgba(124,58,237,0.14), 0 14px 36px rgba(14,165,230,0.08);
    }

    /* Controls */
    .controls{
      display:flex;
      gap:14px;
      align-items:center;
      margin-bottom:18px;
      flex-wrap:wrap;
    }
    .controls select{
      padding:10px 14px;
      border-radius:12px;
      border:1px solid var(--glass-border);
      outline:none;
      font-weight:700;
      color:var(--accent-2);
      background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
      cursor:pointer;
      transition: transform .22s;
    }
    .controls select:focus{ transform: translateY(-2px) scale(1.01) }

    #chatBtn{
      padding:10px 14px;
      border-radius:12px;
      border:none;
      background:linear-gradient(90deg,var(--accent),#ff7b7b);
      color:white;
      font-weight:800;
      cursor:pointer;
      display:none;
      box-shadow: 0 12px 30px rgba(124,58,237,0.14);
    }

    .output{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:16px;
      border:1px solid var(--glass-border);
      padding:18px;
      box-shadow: 0 16px 40px rgba(2,6,23,0.5);
      min-height:160px;
      color:var(--text);
    }
    .empty{ color:var(--muted); font-style:italic; font-weight:700; padding:20px 0; }

    .pill{
      display:inline-block;
      padding:10px 12px;
      border-radius:999px;
      background: linear-gradient(90deg,var(--accent-2), var(--accent));
      color:white;
      margin:8px 8px 8px 0;
      font-weight:800;
      cursor:pointer;
      box-shadow: 0 8px 18px rgba(14,165,230,0.06);
      transition: transform .14s ease, opacity .14s;
      user-select:none;
      text-decoration:none;
    }
    .pill:active{ transform: translateY(2px) scale(.995) }
    .pill.secondary{
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      color:#fff;
    }
    .pill.ghost{
      background:transparent;
      border:1px dashed var(--glass-border);
      color:var(--muted);
      font-weight:700;
    }

    .list-grid{
      display:grid;
      grid-template-columns: 1fr;
      gap:12px;
      margin-top:8px;
    }
    .subject-card{
      background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
      border-radius:12px;
      padding:12px 14px;
      border:1px solid var(--glass-border);
      display:flex;
      justify-content:space-between;
      align-items:center;
      cursor:pointer;
      transition: transform .14s, box-shadow .14s;
      color:var(--text);
    }
    .subject-card:hover{ transform: translateY(-6px); box-shadow: 0 18px 36px rgba(2,6,23,0.45); }

    .books-wrap{ margin-top:12px; display:flex; flex-wrap:wrap; gap:10px; align-items:center; }

    .extra-grid{
      display:grid;
      grid-template-columns: repeat(auto-fit,minmax(160px,1fr));
      gap:12px;
      margin-top:12px;
    }
    .extra-item{
      background: linear-gradient(180deg, rgba(10,10,34,0.95), rgba(10,10,34,0.9));
      padding:14px;
      border-radius:12px;
      font-weight:800;
      text-align:center;
      cursor:pointer;
      border:1px solid rgba(255,255,255,0.02);
      box-shadow: 0 6px 18px rgba(2,6,23,0.5);
      transition: transform .24s ease, box-shadow .24s ease;
      color:var(--text);
    }
    .extra-item:hover{
      transform: translateY(-6px);
      box-shadow: 0 22px 48px rgba(124,58,237,0.08), 0 14px 34px rgba(14,165,230,0.06);
      background-image: linear-gradient(90deg, rgba(124,58,237,0.08), rgba(14,165,230,0.04));
    }

    @media (max-width:1000px){ .cards{ grid-template-columns: repeat(2,1fr); } header h1{ font-size:1.6rem; } }
    @media (max-width:520px){ .cards{ grid-template-columns: 1fr; } }

    /* Chat box */
    .chat-box{
      border-radius:12px; overflow:hidden;
    }
    .chat-box input{
      background: rgba(255,255,255,0.02);
      color:var(--text);
      border-radius:8px;
      padding:8px;
      border:1px solid var(--glass-border);
    }

    /* subtle focus ring */
    :focus{ outline: 3px solid rgba(14,165,230,0.06); outline-offset:2px }

    /* link pill hover */
    a.pill:hover{ transform: translateY(-4px); box-shadow: 0 12px 34px rgba(14,165,230,0.06); }

  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo-left">
        <img src="budhha.png.png" alt="Budhha Logo" />
      </div>

      <div class="title-wrap">
        <h1>Intelligent Library System</h1>
      </div>
      <div class="right">
        <div class="menu-dot" id="menuDot">☰
          <div class="menu-content" id="menuContent"></div>
        </div>
      </div>
    </header>

    <div class="cards">
      <div class="card" id="eLibrary">E-Library</div>
      <div class="card" id="collegeLibrary">College Library</div>
      <div class="card" id="aiAssistant">AI Assistant</div>
      <div class="card" id="extraStudymaterial">Extra Study materials</div>
    </div>

    <button id="chatBtn">Open AI Chat</button>

    <div class="controls" id="controls" style="display:none;">
      <select id="year"><option value="">— Select Year —</option></select>
      <select id="subject"><option value="">— Select Subject —</option></select>
      <select id="category"><option value="">— Select Category —</option></select>
      <select id="pyqYear"><option value="">— Select PYQ Year —</option></select>
    </div>

    <div class="output" id="output">
      <div class="empty">Click E-Library or College Library to start.</div>
    </div>
  </div>

  <script>
    const COLLEGE_LIBRARY = {
      "1 Year": {
        "Math 1": ["B.S. Grewal - Higher Engineering Mathematics", "NP Bali - Engineering Mathematics", "H.K. Dass - Advanced Engineering Mathematics", "Erwin Kreyszig - Advanced Engineering Mathematics"],
        "Math 2": ["B.S. Grewal - Numerical Methods", "NP Bali - Integral Calculus Problems"],
        "Physics": ["Resnick & Halliday - Fundamentals of Physics", "H.C. Verma - Concepts of Physics", "S.L. Gupta - Engineering Physics", "AKTU Physics Guide - Navneet"],
        "Chemistry": ["O.P. Tandon - Physical Chemistry", "Jain & Jain - Organic Chemistry", "Shashi Chawla - Applied Chemistry"],
        "PPS": ["E. Balagurusamy - Programming in ANSI C", "Herbert Schildt - C Programming", "Yashwant Kanetkar - Let Us C"],
        "EVS": ["Erach Bharucha - Environmental Studies", "Benny Joseph - Environmental Studies"],
        "Basic Electrical Engineering": ["V.K. Mehta - Principles of Electrical Engineering", "C.L. Wadhwa - Electrical Machines", "J.B. Gupta - Basic Electronics"]
      },
      "2 Year": {
        "Data Structure": ["Narasimha Karumanchi - Data Structures & Algorithms", "Ellis Horowitz - Data Structures", "Yashwant Kanetkar - Data Structures"],
        "COA": ["Morris Mano - Computer System Architecture", "Carl Hamacher - Computer Organization", "William Stallings - Computer Organization & Architecture"],
        "DSTL": ["Rosen - Discrete Mathematics", "Schaum's Outline - Discrete Math (Lipschutz)"],
        "ESE": ["Boylestad - Electronic Devices", "A.K. Sawhney - Electronic Devices & Circuits", "Sedra & Smith - Microelectronic Circuits"],
        "Python Programming": ["Dr. Reema Thareja - Python Programming", "Eric Matthes - Python Crash Course"]
      },
      "3 Year": {
        "Database Management": ["Raghu Ramakrishnan - Database Management Systems", "Navathe - Database Systems", "Korth - Database System Concepts"],
        "Artificial Intelligence": ["Stuart Russell & Peter Norvig - AI: A Modern Approach", "Elaine Rich - Artificial Intelligence"],
        "Design & Analysis of Algorithm": ["Cormen (CLRS) - Introduction to Algorithms", "Horowitz & Sahni - Fundamentals of Computer Algorithms"],
        "Computer Networks": ["Behrouz Forouzan - Data Communications and Networking", "Tanenbaum - Computer Networks"],
        "Software Engineering": ["Roger Pressman - Software Engineering", "Ian Sommerville - Software Engineering"]
      },
      "4 Year": {
        "Machine Learning": ["Tom Mitchell - Machine Learning", "Aurélien Géron - Hands-On ML", "Christopher Bishop - Pattern Recognition and Machine Learning"],
        "Cloud Computing": ["Rajkumar Buyya - Cloud Computing", "Thomas Erl - Cloud Computing Concepts"],
        "Advanced AI": ["Russell & Norvig - Advanced AI Topics", "Saroj Kaushik - AI (AKTU focus)"]
      }
    };

    const EXTRA_STUDY = [
      { key: "placement", title: "Placement Tips", files: ["Resume Template", "Aptitude Tricks.pdf", "Mock Interview Guide"] },
      { key: "interviews", title: "Interview Questions", files: ["Top 100 Interview Qs.docx", "Behavioral Qs.pdf"] },
      { key: "java", title: "Java Notes", files: ["Core Java Notes.pdf", "Java Collections Guide.pdf"] },
      { key: "python", title: "Python Notes", files: ["Python Basics.pdf", "OOP in Python.pdf"] },
      { key: "c", title: "C Notes", files: ["C Programming Notes.pdf"] },
      { key: "html", title: "HTML Notes", files: ["HTML Quick Reference.pdf"] },
      { key: "css", title: "CSS Notes", files: ["CSS3 Guide.pdf"] },
      { key: "js", title: "JavaScript Notes", files: ["Vanilla JS Notes.pdf"] },
      { key: "dsa_c", title: "DSA in C", files: ["DSA C - Arrays.pdf","DSA C - LinkedList.pdf"] },
      { key: "dsa_python", title: "DSA in Python", files: ["DSA Python - Sorting.pdf"] },
      { key: "dsa_java", title: "DSA in Java", files: ["DSA Java - Trees.pdf"] }
    ];

    const menuStructure = [
      { name: "Student Profile" },
      { name: "AI Assistant" },
      { name: "External Exam" },
      { name: "Internal Exam", children: [
        { name: "CT Papers" },
        { name: "Tutorials", children: [
          { name: "1 Year" }, { name: "2 Year" }, { name: "3 Year" }, { name: "4 Year" }
        ] }
      ] }
    ];

    const FILE_MAP = {
      "2 Year|ESE|PYQ Papers|2020-21": ["ese pyq peper 2021.pdf"],
      "2 Year|ESE|PYQ Papers|2021-22": ["ese pyq peper 2022.pdf"],
      "*|*|Quantum|*": ["ese quantum.pdf"]
    };

    const menuContent = document.getElementById('menuContent');
    function buildMenu(items, parent){
      items.forEach(item=>{
        const a = document.createElement('a');
        a.href = "#";
        a.textContent = item.name;
        parent.appendChild(a);

        if(item.children){
          const subDiv = document.createElement('div');
          subDiv.classList.add('submenu');
          subDiv.style.display = "none";
          subDiv.style.paddingLeft = "10px";
          parent.appendChild(subDiv);
          buildMenu(item.children, subDiv);

          a.addEventListener('click', (e)=>{
            e.preventDefault();
            subDiv.style.display = subDiv.style.display === "block" ? "none" : "block";
          });
        } else {
          a.addEventListener('click', (e)=>{
            e.preventDefault();
            if(item.name === "Student Profile"){
              window.open("5student.html", "_self");
            } else {
              renderMessage(`${item.name} clicked`);
            }
          });
        }
      });
    }
    menuContent.innerHTML = "";
    buildMenu(menuStructure, menuContent);
    document.getElementById('menuDot').addEventListener('click', ()=>{
      menuContent.classList.toggle('show');
    });

    const eLibrary = document.getElementById('eLibrary');
    const collegeLibrary = document.getElementById('collegeLibrary');
    const aiAssistant = document.getElementById('aiAssistant');
    const extraStudy = document.getElementById('extraStudymaterial');
    const controls = document.getElementById('controls');
    const chatBtn = document.getElementById('chatBtn');
    const output = document.getElementById('output');

    renderMessage("Click a card to begin — try College Library or Extra Study.");

    function renderMessage(msg){
      output.innerHTML = `<div class="empty">${msg}</div>`;
    }
    function renderYears(){
      const years = Object.keys(COLLEGE_LIBRARY);
      output.innerHTML = `<div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
        ${years.map(y=>`<div class="pill secondary year-pill" data-year="${y}">${y}</div>`).join('')}</div>
      <div id="subjectsArea" style="margin-top:12px;"></div>
      <div id="booksArea" style="margin-top:12px;"></div>`;
      document.querySelectorAll('.year-pill').forEach(el=>{
        el.addEventListener('click', ()=>{
          const year = el.dataset.year;
          highlightSelected('.year-pill', el);
          renderSubjectsForYear(year);
        });
      });
    }

    function renderSubjectsForYear(year){
      const subjects = Object.keys(COLLEGE_LIBRARY[year] || {});
      const subjectsArea = document.getElementById('subjectsArea');
      const booksArea = document.getElementById('booksArea');
      if(!subjects.length){
        subjectsArea.innerHTML = `<div class="empty">No subjects found for ${year}.</div>`;
        booksArea.innerHTML = '';
        return;
      }
      subjectsArea.innerHTML = `<div style="font-weight:900; margin-bottom:8px; color: var(--accent-2);">Subjects — ${year}</div>
        <div class="list-grid">
          ${subjects.map(s => `<div class="subject-card subject-pill" data-year="${year}" data-subject="${s}">
            <div>${s}</div>
            <div style="color:var(--muted); font-weight:700">➤</div>
          </div>`).join('')}
        </div>`;
      booksArea.innerHTML = `<div class="empty">Choose a subject to view available books.</div>`;

      document.querySelectorAll('.subject-pill').forEach(el=>{
        el.addEventListener('click', ()=>{
          const yr = el.dataset.year;
          const subj = el.dataset.subject;
          highlightSelected('.subject-pill', el);
          renderBooks(yr, subj);
        });
      });
    }

    function renderBooks(year, subject){
      const books = COLLEGE_LIBRARY[year] && COLLEGE_LIBRARY[year][subject] ? COLLEGE_LIBRARY[year][subject] : [];
      const booksArea = document.getElementById('booksArea');
      if(!books.length){
        booksArea.innerHTML = `<div class="empty">No books available for <strong>${subject}</strong> (${year}).</div>`;
        return;
      }
      booksArea.innerHTML = `<div style="font-weight:900; margin-bottom:8px; color: var(--accent-2);">Books — ${subject} (${year})</div>
        <div class="books-wrap">
          ${books.map(b => `<div class="pill" title="${b}">${b}</div>`).join('')}
        </div>`;
    }

    function highlightSelected(selector, selectedEl){
      document.querySelectorAll(selector).forEach(el=>{
        el.style.opacity = '0.6';
        el.style.transform = 'scale(1)';
        el.style.boxShadow = '';
      });
      selectedEl.style.opacity = '1';
      selectedEl.style.transform = 'translateY(-6px) scale(1.02)';
      selectedEl.style.boxShadow = '0 18px 36px rgba(2,6,23,0.45)';
    }

    function renderExtraStudy(){
      output.innerHTML = `<div style="font-weight:900; margin-bottom:8px; color: var(--accent-2);">Extra Study — Quick Access</div>
        <div class="extra-grid">
          ${EXTRA_STUDY.map(item=>`<div class="extra-item" data-key="${item.key}">${item.title}</div>`).join('')}
        </div>
        <div id="extraFilesArea" style="margin-top:12px;"></div>`;
      document.querySelectorAll('.extra-item').forEach(el=>{
        el.addEventListener('click', ()=>{
          const key = el.dataset.key;
          const item = EXTRA_STUDY.find(x=>x.key===key);
          if(!item){ document.getElementById('extraFilesArea').innerHTML = `<div class="empty">No content.</div>`; return; }
          const files = item.files || [];
          document.getElementById('extraFilesArea').innerHTML = `<div style="font-weight:900; margin-bottom:8px; color: var(--accent-2);">${item.title} — Files</div>
            <div class="books-wrap">${files.map(f=>`<a class=\"pill secondary\" style=\"text-decoration:none;\" href=\"${encodeURI(f)}\" target=\"_blank\">${f}</a>`).join('')}</div>`;
        });
      });
    }

    eLibrary.addEventListener('click', ()=>{
      controls.style.display='flex';
      chatBtn.style.display='block';
      renderMessage("E-Library selected: Use controls (year/subject) or explore College Library.");
    });

    collegeLibrary.addEventListener('click', ()=>{
      controls.style.display='none';
      chatBtn.style.display='none';
      renderYears();
    });

    aiAssistant.addEventListener('click', ()=>{
      controls.style.display='none';
      chatBtn.style.display='block';
      renderMessage("AI Assistant ready: Click Open AI Chat to start.");
    });

    extraStudy.addEventListener('click', ()=>{
      controls.style.display='none';
      chatBtn.style.display='none';
      renderExtraStudy();
    });

    chatBtn.addEventListener('click', ()=>{
      if(document.querySelector('.chat-box')) return;
      const chatBox = document.createElement('div');
      chatBox.classList.add('chat-box');
      chatBox.style.position='fixed';
      chatBox.style.bottom='20px';
      chatBox.style.right='20px';
      chatBox.style.width='360px';
      chatBox.style.height='420px';
      chatBox.style.background='linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01))';
      chatBox.style.border='1px solid var(--glass-border)';
      chatBox.style.borderRadius='12px';
      chatBox.style.boxShadow='0 24px 60px rgba(2,6,23,0.6)';
      chatBox.style.padding='12px';
      chatBox.innerHTML = `<h4 style="margin:0 0 8px 0; color: var(--accent-2);">AI Chat</h4>
        <div style="height:320px; overflow:auto; border:1px solid rgba(255,255,255,0.02); padding:8px; margin-bottom:8px; border-radius:8px;"></div>
        <input type="text" placeholder="Type here..." style="width:100%; padding:8px; border-radius:8px; border:1px solid var(--glass-border);">`;
      document.body.appendChild(chatBox);
      setTimeout(()=>{ chatBox.style.transform='translateY(0)'; },50);
    });

    const yearSel = document.getElementById('year');
    const subjectSel = document.getElementById('subject');
    const categorySel = document.getElementById('category');
    const pyqYearSel = document.getElementById('pyqYear');

    const YEARS = ["1 Year","2 Year","3 Year","4 Year"];
    const SUBJECTS = {
      "1 Year":["Engineering Physics","Engineering Chemistry","Math 1","Math 2","PPS","EVS","Basic Electrical Engineering","Soft Skills Electronic","FME"],
      "2 Year":["COA","DSTL","Data Structure","ESE","Cyber Security","Human Value","Math 4","Technical Communication","Python Programming"],
      "3 Year":["Database Management","Artificial Intelligence","Design & Analysis of Algorithm","Department Elective 1","Department Elective 2","Software Engineering","Data Analytics","Computer Networks","Department Elective 3","Open Elective 1","Constitution of India","Essence of Indian Traditional Knowledge"],
      "4 Year":["AI","ML","Cloud Computing"]
    };
    const CATEGORIES = ["Notes","E-Book","PYQ Papers","Quantum","Important Questions"];
    const PYQ_YEARS = ["2017-18","2018-19","2019-20","2020-21","2021-22","2022-23","2023-24","2024-25"];

    function resetSelect(sel, placeholder){ sel.innerHTML = `<option value="">${placeholder}</option>`; }
    function populateYear(){ YEARS.forEach(y=>{ let o=document.createElement('option'); o.value=y; o.textContent=y; yearSel.appendChild(o); }); }
    function populateSubject(year){ resetSelect(subjectSel,"— Select Subject —"); (SUBJECTS[year] || []).forEach(s=>{ let o=document.createElement('option'); o.value=s; o.textContent=s; subjectSel.appendChild(o); }); }
    function populateCategory(){ resetSelect(categorySel,"— Select Category —"); CATEGORIES.forEach(c=>{ let o=document.createElement('option'); o.value=c; o.textContent=c; categorySel.appendChild(o); }); }
    function populatePYQYear(){ resetSelect(pyqYearSel,"— Select PYQ Year —"); PYQ_YEARS.forEach(y=>{ let o=document.createElement('option'); o.value=y; o.textContent=y; pyqYearSel.appendChild(o); }); }

    populateYear();
    renderMessage("Click College Library to browse by year → subject → books.");

    yearSel.addEventListener('change', ()=>{
      if(!yearSel.value) return;
      populateSubject(yearSel.value);
      resetSelect(categorySel,"— Select Category —");
      resetSelect(pyqYearSel,"— Select PYQ Year —");
      renderMessage("Select a Subject next from the dropdown.");
    });
    subjectSel.addEventListener('change', ()=>{
      if(!subjectSel.value) return;
      populateCategory();
      resetSelect(pyqYearSel,"— Select PYQ Year —");
      renderMessage("Select a Category next.");
    });

    categorySel.addEventListener('change', ()=>{
      if(!categorySel.value) return;
      if(categorySel.value === "Quantum"){
        const files = FILE_MAP["*|*|Quantum|*"] || ["ese quantum.pdf"];
        renderFilesWithLinks(`${subjectSel.value} → ${categorySel.value}`, files);
        return;
      }

      if(categorySel.value === "PYQ Papers"){
        populatePYQYear();
        renderMessage("Select PYQ Year.");
      } else {
        renderFiles(`${subjectSel.value} → ${categorySel.value}`, ["Sample File 1", "Sample File 2"]);
      }
    });

    pyqYearSel.addEventListener('change', ()=>{
      if(!pyqYearSel.value) return;
      const key = `${yearSel.value}|${subjectSel.value}|${categorySel.value}|${pyqYearSel.value}`;
      if(FILE_MAP[key]){
        renderFilesWithLinks(`${subjectSel.value} → ${categorySel.value} → ${pyqYearSel.value}`, FILE_MAP[key]);
        return;
      }
      renderFiles(`${subjectSel.value} → ${categorySel.value} → ${pyqYearSel.value}`, ["PYQ File A", "PYQ File B"]);
    });

    function renderFiles(title, files){
      output.innerHTML = `<div style="font-weight:900; margin-bottom:10px; color: var(--accent-2);">${title}</div>
        <div class="books-wrap">${files.map(f=>`<div class=\"pill\">${f}</div>`).join('')}</div>`;
    }

    function renderFilesWithLinks(title, files){
      const html = `<div style="font-weight:900; margin-bottom:10px; color: var(--accent-2);">${title}</div>
        <div class="books-wrap">${files.map(f=>`<a class=\"pill\" style=\"text-decoration:none;\" href=\"${encodeURI(f)}\" target=\"_blank\" rel=\"noopener noreferrer\">${f}</a>`).join('')}</div>`;
      output.innerHTML = html;
    }

    document.addEventListener('click', (e)=>{
      const menuDot = document.getElementById('menuDot');
      if(!menuDot.contains(e.target)) menuContent.classList.remove('show');
    });

  </script>

</body>
</html>